# FaKD 폴더 구조 분석

이 문서는 `FaKD` (Factorized-based Knowledge Distillation) 프로젝트의 폴더 구조, 각 구성 요소의 역할, 그리고 이러한 구조가 채택된 이유를 설명합니다.

## 1. 폴더 구조

```
FaKD/
├── code/                 # 핵심 소스 코드
│   ├── data/
│   ├── models/
│   ├── dataloader.py             # 데이터 로딩 스크립트
│   ├── feature_transformation.py # FaKD 핵심 로직 (특징 변환)
│   ├── loss.py                 # 손실 함수 정의
│   ├── option.py               # 실험 설정 (커맨드 라인 인자)
│   ├── train.py                # 메인 훈련 스크립트
│   ├── test.py                 # 메인 테스트 스크립트
│   └── utility.py              # 유틸리티 함수
├── experiment/           # 실험 결과 저장 위치 (로그, 모델 등)
├── figure/               # README 또는 논문에 사용될 이미지
├── teacher_checkpoint/   # 사전 훈련된 '교사' 모델 저장 위치
└── README.md             # 프로젝트 설명서
```

## 2. 구성 요소 설명

- **`code`**: 프로젝트의 핵심 소스 코드가 위치하는 디렉토리입니다.
  - `dataloader.py`: 학습에 사용할 데이터셋을 불러오고 배치(batch) 형태로 가공하는 역할을 합니다.
  - `feature_transformation.py`: 이 프로젝트의 핵심 아이디어인 "Factorized-based Knowledge Distillation"을 구현하는 코드가 있을 가능성이 높습니다. 교사 모델과 학생 모델 간의 특징(feature)을 변환하고 정렬하는 로직을 포함합니다.
  - `loss.py`: 지식 증류(Knowledge Distillation)를 위한 복합적인 손실 함수가 정의됩니다. 학생 모델 자체의 손실(student loss)과 교사 모델의 지식을 전달받기 위한 증류 손실(distillation loss)을 결합하는 방식이 주로 사용됩니다.
  - `option.py`: 커맨드 라인(command-line)을 통해 입력받는 인자들을 파싱하고 관리합니다. `CATANet`의 `.yml` 설정 파일 방식 대신, 실행 시점에 직접 하이퍼파라미터를 전달하는 방식을 사용합니다.
  - `train.py` / `test.py`: 각각 모델 훈련과 테스트를 위한 메인 스크립트입니다. `option.py`를 통해 설정값을 받아 실행됩니다.

- **`experiment`**: 훈련 스크립트를 실행할 때 생성되는 모든 결과물을 저장하는 폴더입니다. 특정 실험의 로그 파일, 훈련된 학생 모델의 가중치(checkpoint), 성능 평가 결과 등이 이곳에 저장되어 각 실험을 체계적으로 관리하고 비교할 수 있습니다.

- **`teacher_checkpoint`**: 지식 증류의 '교사(Teacher)' 역할을 하는, 이미 잘 훈련된 크고 성능 좋은 모델의 가중치 파일을 저장하는 폴더입니다. `train.py`는 여기 있는 교사 모델을 불러와 '학생(Student)' 모델을 가르치는 데 사용합니다.

- **`figure`**: 프로젝트의 `README.md` 파일이나 관련 연구 논문에 포함될 다이어그램, 그래프 등의 이미지를 저장하는 곳입니다.

## 3. 구조 설계의 이유

이 프로젝트는 지식 증류 연구에 특화된 효율적인 구조를 가지고 있습니다.

- **실험 중심의 워크플로우**: 최상위에 `experiment` 폴더를 두어, `train.py`를 실행하면 해당 실험의 모든 결과물이 하위 폴더에 자동으로 정리되도록 설계되었습니다. 이는 다양한 하이퍼파라미터로 여러 실험을 반복 수행하고 결과를 추적하는 연구 환경에 매우 적합합니다.

- **명확한 역할 분리 (교사/학생)**: `teacher_checkpoint`라는 명시적인 폴더를 통해 지식 증류의 핵심 요소인 '교사 모델'을 명확하게 분리하여 관리합니다. 이는 훈련될 '학생 모델'의 결과물이 저장될 `experiment` 폴더와 역할이 겹치지 않아 혼동을 방지합니다.

- **직관적인 소스 코드 구조**: `code` 폴더 내에 `train.py`, `loss.py` 등 핵심 파일들이 비교적 얕은 깊이에 위치하여 코드의 전체적인 흐름을 파악하기 용이합니다.

- **유연한 설정 관리**: 커맨드 라인 인자로 실험 설정을 관리(`option.py`)함으로써, 셸 스크립트 등을 이용해 여러 실험을 자동화하고 동적으로 파라미터를 변경하기에 편리한 구조입니다.
